/ %p#notice= notice
/ %h1 Listing Projects


/ = link_to 'New Project', new_project_path
/ %br/
/ %br/
/ - @projects.each do |project|
/   = link_to project.name, project
/   = project.aasm_state
/   %br/
/   = link_to "Create Task", new_project_task_path(project)
/   = link_to "Edit Project", edit_project_path(project)
/   %table
/     %thead
/       %tr
/         %th
/         %th Description
/         %th Owner
/         %th Due Date
/         %th{:colspan => "3"}
/       %tbody
/         - project.tasks.each do |task|
/           %tr
/           %td= button_to "Mark as #{task.other_state}", update_state_project_task_path(id: task.id, project_id: project.id), method: :put
/           %td= task.description
/           %td= link_to User.find(task.owner_id).first_name, user_path(task.owner_id)
/           %td= task.due_at
/   %br/
/   %br/
  
.container
  %h2.header-align Projects
  / Button trigger modal
  %button.btn.btn-gray.header-align-btn
    =link_to 'New Project', new_project_path, {:remote => true, 'data-toggle' =>  "modal", 'data-target' => '#createNewModal'}
  %hr/
  / Key ----------------------------------------------------------------
  %p.project-key
    %span.on-track On Track
    %span.at-risk At Risk
    %span.in-trouble In Trouble
    %span.in-maintenance In Maintenance
    %span.waiting-on-client Waiting On Client
  %br/
  / Card Block -----------------------------------------------------------
  #flex-container.row
    - @projects.each do |project|
      .card.on-track.col-sm-5
        .card-header.card-header-inline
          %h3.card-header-inline
            %a=link_to project.name, project
          .card-header-edit
            %button.btn.btn-link.btn-link-override
              =link_to edit_project_path(project), {:remote => true, 'data-toggle' =>  "modal", 'data-target' => '#createNewModal'} do
                %i.fa.fa-pencil.fa-2x{"aria-hidden" => "true"}
        .card-block
          .checkbox
            %button.btn.btn-link.btn-link-override{"data-target" => "#newTaskModal", "data-toggle" => "modal", :type => "button"}
              =link_to new_project_task_path(project), {:remote => true, 'data-toggle' =>  "modal", 'data-target' => '#newTaskModal'} do
                %i.fa.fa-plus{"aria-hidden" => "true"}
                %label.card-task Create New Task
          - project.tasks.each do |task|
            .checkbox
              %input{:type => "checkbox", :value => "", checked: task.complete?}
              %label.card-task=task.description
            .checkbox 
      / card block
    / card

  / /flex-container
/ /.container

#newTaskModal.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "exampleModalLabel", :role => "dialog", :tabindex => "-1"}
#createNewModal.modal.hide.fade{"aria-hidden" => "true", "aria-labelledby" => "exampleModalLabel", :role => "dialog",:tabindex => "-1"}

